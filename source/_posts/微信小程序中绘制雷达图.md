---
title: å¾®ä¿¡å°ç¨‹åºä¸­ç»˜åˆ¶é›·è¾¾å›¾
date: 2018-08-29 09:50:00
tags: [å°ç¨‹åº, html, å‰ç«¯]
toc: true
categories:
  - å·¥ä½œ
  - å°ç¨‹åº
thumbnail: https://upload-images.jianshu.io/upload_images/2641798-4cb2f61add473cd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/124
---

## å‰è¨€

é›·è¾¾å›¾ï¼ˆRadar Chartï¼‰ï¼Œåˆå¯ç§°ä¸ºæˆ´å¸ƒæ‹‰å›¾ã€èœ˜è››ç½‘å›¾ï¼ˆSpider Chartï¼‰ï¼Œæ˜¯è´¢åŠ¡åˆ†ææŠ¥è¡¨çš„ä¸€ç§ã€‚ä½¿ç”¨è€…èƒ½ä¸€ç›®äº†ç„¶çš„äº†è§£å„é¡¹æŒ‡æ ‡çš„å˜åŠ¨æƒ…å½¢åŠå…¶å¥½åè¶‹å‘ã€‚
æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­å®ç°é›·è¾¾å›¾ç»˜åˆ¶ã€‚

<!-- more -->

![é›·è¾¾å›¾](https://upload-images.jianshu.io/upload_images/2641798-4cb2f61add473cd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç»˜åˆ¶èƒŒæ™¯

é¦–å…ˆæˆ‘ä»¬éœ€è¦ç»˜åˆ¶å‡ºé›·è¾¾å›¾åé¢çš„â€œèœ˜è››ç½‘â€ã€‚å…·ä½“åŸç†å°±æ˜¯ä¸€å±‚ä¸€å±‚å°†å¤šè¾¹å½¢ç”»å‡ºæ¥ï¼Œæ ¹æ®æ•°æ®é•¿åº¦å†³å®šæ¯ä¸€ä¸ªç‚¹çš„ä½ç½®å’ŒåŠå¾„é•¿åº¦ã€‚

```
var angle = Math.PI * 2 / length;
for (var layer = 5; layer > 0; layer--) {
        context.beginPath();
        context.setGlobalAlpha(1);
        context.setStrokeStyle("#D3D3D3");
        if (layer % 2 != 0) {
          context.setFillStyle("white");
        } else {
          context.setFillStyle("#F5F5F5");
        }
        var currentRad = layer / 5 * radius;
        context.moveTo(center.x, center.y - currentRad);
        var currentAngle = -Math.PI / 2;
        for (var i = 0; i < length; i++) {
          context.lineTo(center.x + currentRad * Math.cos(currentAngle), center.y + currentRad * Math.sin(currentAngle));
          currentAngle += angle;
        }
        context.fill();
        context.closePath();
        context.stroke();
      }
```

å¦‚ä»£ç æ‰€ç¤ºï¼Œ`angle`æ˜¯æ ¹æ®æ•°æ®é•¿åº¦å†³å®šçš„ï¼Œè¿™é‡Œä¸ºäº†å¥½çœ‹ï¼Œä¸€å…±ç”»äº”å±‚ï¼Œå¹¶ä¸”äº¤æ›¿æ¶‚æŠ¹é¢œè‰²ã€‚ä¸‹å›¾æ˜¯`length=6`çš„æ•ˆæœï¼š
![èœ˜è››ç½‘](https://upload-images.jianshu.io/upload_images/2641798-482cb08a73db4b5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç»˜åˆ¶è½´

æ¥ä¸‹æ¥å°±æ˜¯å°†å„ä¸ªé¡¶ç‚¹ä¸åœ†å¿ƒè¿æ¥èµ·æ¥ã€‚æœ‰äº†â€œèœ˜è››ç½‘â€çš„ç»éªŒï¼Œç”»è½´å°±ç®€å•å¤šäº†ï¼Œåªéœ€è¦çŸ¥é“æœ€å¤–å±‚é¡¶ç‚¹ä½ç½®ç„¶å`lineTo`åœ†å¿ƒå°±è¡Œäº†ã€‚

```
      // draw Axis
      context.beginPath();
      var currentAngle = -Math.PI / 2;
      for (var i = 0; i < length; i++) {
        context.moveTo(center.x + radius * Math.cos(currentAngle), center.y + radius * Math.sin(currentAngle));
        context.lineTo(center.x, center.y);
        currentAngle += angle;
      }
      context.closePath();
      context.stroke();
```

ä»¥ä¸‹æ˜¯åŠ ä¸Šè½´çº¿åçš„æ•ˆæœï¼š
![æ•°è½´](https://upload-images.jianshu.io/upload_images/2641798-fd3a8dd75cc634c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç»˜åˆ¶æŒ‡æ ‡

æ¥ä¸‹æ¥æ˜¯å°†å„ä¸ªç»´åº¦æŒ‡æ ‡åå­—æ·»åŠ åˆ°å›¾è¡¨ä¸Šã€‚åŒæ•°è½´ä¸€æ ·ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šæœ€å¤–å±‚é¡¶ç‚¹çš„ä½ç½®ï¼Œç„¶åæ ¹æ®ä½ç½®è°ƒæ•´æ–‡å­—æ˜¾ç¤ºçš„åŸºå‡†ï¼Œå°†æ–‡å­—å†™ä¸Šå»ã€‚

```
      // draw Index
      context.beginPath();
      context.setFillStyle("#D3D3D3");
      context.setFontSize(14);
      var currentAngle = -Math.PI / 2;
      for (var i = 0; i < length; i++) {
        var posX = center.x + radius * Math.cos(currentAngle);
        var posY = center.y + radius * Math.sin(currentAngle);
        if (posX < center.x) context.setTextAlign("right");
        else context.setTextAlign("left");
        if (posY > center.y) context.setTextBaseline("top");
        else context.setTextBaseline("bottom");
        context.fillText(that.options.xLabel[i], posX, posY);
        currentAngle += angle;
      }
      context.closePath();
```

è¿™é‡Œä¸ºäº†å¥½çœ‹ï¼Œå¯¹äºæ–‡å­—è¦æ˜¾ç¤ºçš„ä½ç½®å°äºä¸­å¿ƒç‚¹ x åæ ‡çš„é å³å¯¹é½ï¼Œå¦åˆ™é å·¦å¯¹é½ï¼›å¯¹äºæ–‡å­—ä½ç½®å¤§äºä¸­å¿ƒç‚¹ y åæ ‡çš„åŸºå‡†è®¾ç½®åœ¨ä¸Šæ–¹ï¼Œå¦åˆ™åœ¨ä¸‹æ–¹ã€‚ä»¥ä¸‹æ˜¯åŠ ä¸ŠæŒ‡æ ‡åçš„æ•ˆæœï¼š
![æŒ‡æ ‡](https://upload-images.jianshu.io/upload_images/2641798-896f6d32eda04d07.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç»˜åˆ¶æ•°æ®

æœ€åï¼Œæˆ‘ä»¬å°†æ•°æ®ç»˜åˆ¶åˆ°å›¾è¡¨ä¸Šã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦ç¡®å®šæ‰€æœ‰æ•°æ®çš„æœ€å¤§å€¼ï¼Œå¦‚æœæœ€å¤§å€¼å¤§äº 10ï¼Œé‚£ä¹ˆå– 10 çš„å€æ•°ã€‚ç„¶ååŒç”»â€œèœ˜è››ç½‘â€ä¸€æ ·ï¼Œå°†å„ä¸ªæ•°æ®ç‚¹çš„åŠå¾„æ ¹æ®ç›¸å¯¹äºæœ€å¤§å€¼æ¯”ä¾‹æ¢ç®—å‡ºæ¥ï¼Œç„¶åç»˜åˆ¶åœ¨å›¾è¡¨ä¸Šã€‚

```
      // draw data
      var MaxValue = Math.max.apply(null, that.options.data[0].value);
      that.options.data.forEach(function(val) {
        var temp = Math.max.apply(null, val.value);
        if (temp > MaxValue) MaxValue = temp;
      });
      if (MaxValue > 10) {
        MaxValue = Math.ceil(MaxValue / 10) * 10
      }

      that.options.data.forEach(function(val) {
        context.beginPath();
        context.setStrokeStyle(val.color);
        var currentRad = radius * val.value[0] / MaxValue * step / MaxStep;
        context.moveTo(center.x, center.y - currentRad);
        var currentAngle = -Math.PI / 2;
        for (var i = 0; i < length; i++) {
          currentRad = radius * val.value[i] / MaxValue * step / MaxStep;
          context.lineTo(center.x + currentRad * Math.cos(currentAngle), center.y + currentRad * Math.sin(currentAngle));
          currentAngle += angle;
        }
        currentRad = radius * val.value[0] / MaxValue * step / MaxStep;
        context.lineTo(center.x, center.y - currentRad);
        context.stroke();
        if (that.options.area) {
          context.setFillStyle(val.color);
          context.setGlobalAlpha(0.5);
          context.fill();
        }
        context.closePath();
      });
      context.draw();
```

ä»¥ä¸‹å°±æ˜¯æ·»åŠ æ•°æ®åçš„å®Œæ•´æ•ˆæœï¼š
![æ•°æ®](https://upload-images.jianshu.io/upload_images/2641798-cb22523fbd815021.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## æ·»åŠ ç»˜åˆ¶åŠ¨ç”»

ä¸ºäº†æ˜¾ç¤ºæ•ˆæœæ›´ä½³ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç»˜åˆ¶å›¾è¡¨åŠ ä¸ŠåŠ¨ç”»ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š

```
  var angle = Math.PI * 2 / length;

  var step = 1;
  var MaxStep = that.options.animation ? 50 : 1;
  var animation = function() {
    if (step <= MaxStep) {
      // draw background
      for (var layer = 5; layer > 0; layer--) {
        context.beginPath();
        context.setGlobalAlpha(1);
        context.setStrokeStyle("#D3D3D3");
        if (layer % 2 != 0) {
          context.setFillStyle("white");
        } else {
          context.setFillStyle("#F5F5F5");
        }
        var currentRad = layer / 5 * radius;
        context.moveTo(center.x, center.y - currentRad);
        var currentAngle = -Math.PI / 2;
        for (var i = 0; i < length; i++) {
          context.lineTo(center.x + currentRad * Math.cos(currentAngle), center.y + currentRad * Math.sin(currentAngle));
          currentAngle += angle;
        }
        context.fill();
        context.closePath();
        context.stroke();
      }

      // draw Axis
      context.beginPath();
      var currentAngle = -Math.PI / 2;
      for (var i = 0; i < length; i++) {
        context.moveTo(center.x + radius * Math.cos(currentAngle), center.y + radius * Math.sin(currentAngle));
        context.lineTo(center.x, center.y);
        currentAngle += angle;
      }
      context.closePath();
      context.stroke();

      // draw Index
      context.beginPath();
      context.setFillStyle("#D3D3D3");
      context.setFontSize(14);
      var currentAngle = -Math.PI / 2;
      for (var i = 0; i < length; i++) {
        var posX = center.x + radius * Math.cos(currentAngle);
        var posY = center.y + radius * Math.sin(currentAngle);
        if (posX < center.x) context.setTextAlign("right");
        else context.setTextAlign("left");
        if (posY > center.y) context.setTextBaseline("top");
        else context.setTextBaseline("bottom");
        context.fillText(that.options.xLabel[i], posX, posY);
        currentAngle += angle;
      }
      context.closePath();

      // draw data
      var MaxValue = Math.max.apply(null, that.options.data[0].value);
      that.options.data.forEach(function(val) {
        var temp = Math.max.apply(null, val.value);
        if (temp > MaxValue) MaxValue = temp;
      });
      if (MaxValue > 10) {
        MaxValue = Math.ceil(MaxValue / 10) * 10
      }

      that.options.data.forEach(function(val) {
        context.beginPath();
        context.setStrokeStyle(val.color);
        var currentRad = radius * val.value[0] / MaxValue * step / MaxStep;
        context.moveTo(center.x, center.y - currentRad);
        var currentAngle = -Math.PI / 2;
        for (var i = 0; i < length; i++) {
          currentRad = radius * val.value[i] / MaxValue * step / MaxStep;
          context.lineTo(center.x + currentRad * Math.cos(currentAngle), center.y + currentRad * Math.sin(currentAngle));
          currentAngle += angle;
        }
        currentRad = radius * val.value[0] / MaxValue * step / MaxStep;
        context.lineTo(center.x, center.y - currentRad);
        context.stroke();
        if (that.options.area) {
          context.setFillStyle(val.color);
          context.setGlobalAlpha(0.5);
          context.fill();
        }
        context.closePath();
      });
      context.draw();
      step++;
    } else {
      clearInterval(aniName);
    }
  }
  var aniName = setInterval(animation, 10);
```

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š
![åŠ¨ç”»æ•ˆæœ](https://upload-images.jianshu.io/upload_images/2641798-d476058258f845d5.gif?imageMogr2/auto-orient/strip)

## ç»“è¯­

ğŸ˜Š ä»¥ä¸Šå°±æ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ç»˜åˆ¶é›·è¾¾å›¾çš„æ–¹æ³•ã€‚å¦‚æœ‰å…´è¶£äº†è§£æ›´å¤šï¼Œå¯ä»¥æŸ¥çœ‹å®Œæ•´ä»£ç ï¼š[https://github.com/chmini-app/CHCharts-wechat](https://github.com/chmini-app/CHCharts-wechat)ã€‚
